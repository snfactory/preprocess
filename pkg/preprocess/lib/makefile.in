######################################################################
## Filename:      makefile.in
## Version:       
## Description:   
## Author:        Yannick Copin <y.copin@ipnl.in2p3.fr>
## Created at:    Tue Mar 25 16:21:56 2003
## $Id$
## Modified by:   Emmanuel Gangler <e.gangler@ipnl.in2p3.fr>
######################################################################

topdir = @top_srcdir@
top_builddir = $(topdir)
subdir = pkg/preprocess/lib
include $(topdir)/add_defs/makedefs
include $(topdir)/add_defs/makedefs.local

# ============================================================

# Targets

OBJ = $(O)/bichip.o\
	$(O)/catorfile.o\
	$(O)/image.o\
	$(O)/imagesnifs.o\
	$(O)/section.o\
	$(O)/sectionlist.o\
	$(O)/utils.o \
	$(O)/analyser.o \
	$(O)/ioplain.o \
	$(O)/ioslice.o \
	$(O)/imagestack.o\
	$(O)/kombinator.o\
	$(O)/imagestacksnifs.o\

LIB = $(O)/libpreprocess.a 

# ============================================================

OUT : dirobj $(LIB)       

# Objects
$(O)/%.o : %.c $(STAND_INC) $(preprocess_INC) makefile
	$(C_COMPILE)

# Objects C++
$(O)/%.o : %.cxx $(STAND_INC) $(preprocess_INC) makefile
	$(CXXCOMPILE)

# Library
$(LIB) : $(OBJ)
	$(AR) rv $(LIB) $(OBJ)
	$(RANLIB) $@

clear:
	rm -f $(OBJ) $(EXE)

makefile: makefile.in  $(top_builddir)/config.status
	cd $(top_builddir) \
	  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status
