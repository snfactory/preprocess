######################################################################
## Filename:      makefile.in
## Version:       
## Description:   
## Author:        Yannick Copin <y.copin@ipnl.in2p3.fr>
## Created at:    Tue Mar 25 16:21:56 2003
## Modified at:   Fri Feb 13 14:53:47 2004
## Modified by:   Emmanuel Gangler <e.gangler@ipnl.in2p3.fr>
######################################################################

topdir = @top_srcdir@
top_builddir = $(topdir)
subdir = pkg/preprocess/source
include $(topdir)/add_defs/makedefs
include $(topdir)/add_defs/makedefs.local

# ============================================================

# Local libraries

LOCLIB = $(O)/libpreprocess.a

# Targets

WEXE = $(E)/preprocess

EXE =	$(E)/preprocess_bias\
	$(E)/preprocess_flat\
	$(E)/preprocess\
	$(E)/rickify\
	$(E)/split_image\
	$(E)/quick_look\
	$(E)/fft_image\
	$(E)/copy_image\
	$(E)/copy_image_slice\
	$(E)/test_extension\
	$(E)/stack_bias\
	$(E)/stack_bichip\
	$(E)/preprocess_dark\

OPTEXE =  $(E)/substract_overscan\
	$(E)/substract_dark\
	$(E)/substract_flat\
	$(E)/build_flat\
	$(E)/add_poisson\
	$(E)/odd_even_correct\
	$(E)/bichip_assemble\
	$(E)/bichip_sub_bias\
	$(E)/bichip_overscan\
	$(E)/bichip_variance\
	$(E)/stack_bichip_gain\
	$(E)/wr_desc\
	$(E)/add_image\
	$(E)/image_flip\

# ============================================================

#OUT : dirbin dirobj $(WEXE)
OUT : dirbin dirobj $(EXE) $(OPTEXE)

# Objects
$(O)/%.o : %.c $(STAND_INC) $(preprocess_INC) makefile
	$(C_COMPILE)

# Objects C++
$(O)/%.o : %.cxx $(STAND_INC) $(preprocess_INC) makefile
	$(CXXCOMPILE)

# Executables (beware: the % syntax might not be standard)
$(E)/% : $(O)/%.o $(LOCLIB) $(IOLIB)
	$(CXXLINK)
	$(STRIP) $@


clear:
	rm -f $(OBJ) $(EXE)

makefile: makefile.in  $(top_builddir)/config.status
	cd $(top_builddir) \
	  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status
